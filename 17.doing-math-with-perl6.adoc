== ä½¿ç”¨ Perl 6 åšæ•°å­¦è®¡ç®—

=== Sets

Perl 6 åŒ…æ‹¬ link:https://docs.perl6.org/type/Set[Set] æ•°æ®ç±»å‹ï¼Œä»¥åŠå¯¹link:https://docs.perl6.org/language/setbagmix#Set%2FBag_Operators[å¤§å¤šæ•° set æ“ä½œ]çš„æ”¯æŒã€‚link:https://en.wikipedia.org/wiki/Algebra_of_sets[å¹¶é›†å’Œäº¤é›†]ä¸ä»…æ˜¯åŸç”Ÿæ“ä½œï¼Œå®ƒä»¬ä½¿ç”¨è‡ªç„¶ç¬¦å· `âˆ©` å’Œ `âˆª`ã€‚ä¾‹å¦‚ï¼Œæ­¤ä»£ç å°†æ£€æŸ¥æœ‰é™æ•°é‡é›†çš„é›†ç®—æœ¯çš„åŸºæœ¬å®šå¾‹ï¼š

```perl6
my @arbitrary-numbers = ^100;
my \U = @arbitrary-numbers.Set;
 
my @sets;
 
@sets.push: Set.new( @arbitrary-numbers.pick( @arbitrary-numbers.elems.rand)) for @arbitrary-numbers;
 
my (@union, @intersection);
 
for @sets -> $set {
    @union.push: $set âˆ© $set === $set;
    @intersection.push: $set âˆª $set === $set;
}
 
say "Idempotent union is ", so @union.all;
# OUTPUT: Â«Idempotent union is TrueÂ» 
say "Idempotent intersection is ", so @intersection.all;
# OUTPUT: Â«Idempotent intersection is TrueÂ» 
my (@universe, @empty-set, @id-universe, @id-empty);
 
for @sets -> \A {
    @universe.push: A âˆª U === U;
    @id-universe.push: A âˆ© U === A;
    @empty-set.push: A âˆ© âˆ… === âˆ…;
    @id-empty.push: A âˆª âˆ… === A;
}
 
say "Universe dominates ", so @universe.all;    # OUTPUT: Â«Universe dominates TrueÂ» 
say "Empty set dominates ", so @empty-set.all;  # OUTPUT: Â«Empty set dominates TrueÂ» 
 
say "Identity with U ", so @id-universe.all;    # OUTPUT: Â«Identity with U TrueÂ» 
say "Identity with âˆ… ", so @id-empty.all;       # OUTPUT: Â«Identity with âˆ… TrueÂ» 
```

åœ¨è¿™ä¸ªä½¿ç”¨ Perl 6 å·²ç»å®šä¹‰çš„link:https://docs.perl6.org/language/setbagmix#term_%25E2%2588%2585[ç©ºé›†]çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…æ£€æŸ¥é›†åˆä»£æ•°ä¸­çš„ç­‰å¼æ˜¯å¦æˆç«‹ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡link:https://docs.perl6.org/language/variables#index-entry-%5C_%28sigilless_variables%29[æ— ç¬¦å·å˜é‡]å’Œé›†åˆè¿ç®—ç¬¦çš„ Unicode å½¢å¼ä½¿ç”¨è¡¨è¾¾å¼ã€‚å°½å¯èƒ½æ¥è¿‘åŸå§‹å½¢å¼; ä¾‹å¦‚ï¼Œ`A âˆª U === U`ï¼Œé™¤äº†ä½¿ç”¨link:https://docs.perl6.org/routine/===[å€¼æ ‡è¯†è¿ç®—ç¬¦ <===>] ä¸link:https://en.wikipedia.org/wiki/Algebra_of_sets[ç»´åŸºç™¾ç§‘æ¡ç›®]ä¸­çš„å®é™…æ•°å­¦è¡¨è¾¾å¼éå¸¸æ¥è¿‘ã€‚

æˆ‘ä»¬ç”šè‡³å¯ä»¥æµ‹è¯•æ‘©æ ¹å®šå¾‹ï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š

```perl6
my @alphabet = 'a'..'z';
my \U = @alphabet.Set;
sub postfix:<â»>(Set $a) { U âŠ– $a }
my @sets;
@sets.push: Set.new( @alphabet.pick( @alphabet.elems.rand)) for @alphabet;
my ($de-Morgan1,$de-Morgan2) = (True,True);
for @sets X @sets -> (\A, \B){
    $de-Morgan1 &&= (A âˆª B)â»  === Aâ» âˆ© Bâ»;
    $de-Morgan2 &&= (A âˆ© B)â»  === Aâ» âˆª Bâ»;
}
say "1st De Morgan is ", $de-Morgan1;
say "2nd De Morgan is ", $de-Morgan2;
```

æˆ‘ä»¬å£°æ˜ - ä½œä¸ºè¡¥è¯­è¿ç®—ï¼Œå®ƒè®¡ç®—é€šç”¨é›†Uå’Œæˆ‘ä»¬é›†ä¹‹é—´çš„å¯¹ç§°å·®âŠ–ã€‚ä¸€æ—¦å®£å¸ƒè¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥æ¯”è¾ƒå®¹æ˜“åœ°è¡¨è¾¾è¯¸å¦‚Aå’ŒBçš„å¹¶é›† `(A âˆª B)â»` çš„è¡¥é›†ï¼Œå…¶ç¬¦å·ä¸åŸå§‹æ•°å­¦ç¬¦å·éå¸¸æ¥è¿‘ã€‚

=== ç®—æœ¯

Perl 6 å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹è¿›è¡Œç®—æœ¯è¿ç®—ã€‚ link:https://docs.perl6.org/type/Num[Num]ï¼Œlink:https://docs.perl6.org/type/Rat[Rat] å’Œ link:https://docs.perl6.org/type/Complex[Complex] éƒ½å¯ä»¥link:https://en.wikipedia.org/wiki/Field_(mathematics[åœ¨æ“ä½œåŠ æ³•ï¼Œå‡æ³•ï¼Œä¹˜æ³•å’Œé™¤æ³•ä¸‹ä½œä¸ºåœº])è¿è¡Œã€‚ç­‰æ•ˆçš„æ•°å­¦é¢†åŸŸæ˜¯ï¼š

|===
| Perl 6 class | Field
|    C<Rat>	    |   â„š 
|    C<Num>  	|   â„ 
|    C<Complex> |  	â„‚ 
|===

`Int`s è™½ç„¶åœ¨æŠ€æœ¯ä¸Šä¸ **Z** ç›¸å¯¹åº”ï¼Œä½†å®ƒå¹¶ä¸æ˜¯çœŸæ­£çš„æ•°å­¦é¢†åŸŸï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯åœ¨å››ä¸ªç®—æœ¯è¿ç®—ä¸‹å…³é—­çš„ï¼Œå¹¶ä¸”æ•´æ•°ä¸æ»¡è¶³link:https://math.stackexchange.com/questions/2192317/set-of-integers-not-a-field/2192330[åŒä¸€æ€§å…¬ç†]ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨æ•´æ•°é™¤æ³• `div`ï¼Œå®ƒä»¬çš„æ“ä½œå°†å§‹ç»ˆäº§ç”Ÿå…¶ä»–æ•´æ•°;ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨ `/`ï¼Œé€šå¸¸ç»“æœå°†æ˜¯ link:https://docs.perl6.org/type/Rat[Rat]ã€‚

æ­¤å¤–ï¼Œ`Int` å¯ä»¥è¿›è¡Œæ— é™ç²¾åº¦ç®—æœ¯ï¼ˆæˆ–è€…è‡³å°‘åœ¨å­˜å‚¨å™¨å…è®¸çš„æƒ…å†µä¸‹æ— é™åˆ¶;è¿˜å¯ä»¥å‘ç”Ÿæ•°å­—æº¢å‡º(`Numeric overflow`)ï¼‰ï¼Œå¦‚æœæ•°å­—å¤ªå¤§åˆ™ä¸ä¼šå›è½åˆ° link:https://docs.perl6.org/type/Num[Num]ï¼š

```perl6
my @powers = 2, 2 ** * ... Inf; say @powers[4].chars; # OUTPUT: Â«19729â¤Â» 
```

åŒæ ·ä¸¥æ ¼åœ°è¯´ï¼Œè¡Œä¸ºç±»ä¼¼äºæ•°å­¦é¢†åŸŸçš„ Rational ç±»æ˜¯ link:https://docs.perl6.org/type/FatRat[FatRat]ã€‚å‡ºäºæ•ˆç‡åŸå› ï¼Œå½“æ•°å­—è¶³å¤Ÿå¤§æˆ–è€…åˆ†å­å’Œåˆ†æ¯ä¹‹é—´å­˜åœ¨å¾ˆå¤§å·®å¼‚æ—¶ï¼Œæ“ä½œ `Rats` æ—¶ä¼šå›è½åˆ° `Num`ã€‚ `FatRat` å¯ä»¥ä½¿ç”¨ä»»æ„ç²¾åº¦ï¼Œä¸é»˜è®¤çš„ `Int` ç±»ç›¸åŒã€‚

ç”Ÿæ€ç³»ç»Ÿä¸­çš„æŸäº›æ¨¡å—å¯ä»¥ä½¿ç”¨æ•°å­¦æ–¹æ³•å¤„ç†å…¶ä»–æ•°æ®ç±»å‹ï¼š

- link:https://github.com/pierre-vigier/Perl6-Math-Matrix[Math::Matrix] æ“ä½œçŸ©é˜µå­—æ®µã€‚
- link:https://github.com/Util/Perl6-Math-Quaternion[Math::Quaternion] æ“ä½œlink:https://en.wikipedia.org/wiki/Quaternion[å››å…ƒæ•°å­—æ®µ]ï¼Œè¿™æ˜¯å¤æ•°çš„æ¨å¹¿ã€‚
- link:https://github.com/colomon/Math-Polynomial[Math::Polynomial] ä¸å¤šé¡¹å¼ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿç”¨å®ƒä»¬è¿›è¡Œç®€å•çš„ç®—æœ¯è¿ç®—ã€‚
- link:https://github.com/raydiak/Math-Symbolic[Math::Symbolic]ï¼Œç”¨äºç¬¦å·æ•°å­¦

æ•°å­—ä¼šè‡ªåŠ¨å˜ä¸ºå…¶å®é™…è¡¨ç¤ºçš„æ•°å­—ç±»å‹ï¼š

```perl6
.^name.say for (4, â…—, 1e-9, 3+.1i); # OUTPUT: Â«Intâ¤Ratâ¤Numâ¤Complexâ¤Â» 
```

è¿™ä¹Ÿä½¿ç®—æœ¯è¿ç®—æœ€é€‚åˆç‰¹å®šç±»å‹

```perl6
say .33-.22-.11 == 0; # OUTPUT: Â«Trueâ¤Â» 
```

åœ¨è¿™å„¿ï¼Œæ‰€æœ‰æ•°å­—éƒ½è¢«è§£é‡Šä¸º `Rat`sï¼Œè¿™ä½¿å¾—æ“ä½œå‡†ç¡®ã€‚é€šå¸¸ï¼Œå¤§å¤šæ•°è¯­è¨€ä¼šå°†å®ƒä»¬è§£é‡Šä¸ºæµ®ç‚¹æ•°ï¼Œ

```perl6
say .33.Num -.22.Num - .11.Num; # OUTPUT: Â«1.3877787807814457e-17â¤Â» 
```

å¯¹äºè¿™æ ·çš„æƒ…å†µï¼ŒPerl 6 è¿˜åŒ…æ‹¬ä¸€ä¸ªè¿‘ä¼¼ç›¸ç­‰çš„è¿ç®—ç¬¦(` approximately equal `)ï¼Œlink:https://docs.perl6.org/language/operators#infix_%3D~%3D[â‰…]

```perl6
say .33.Num -.22.Num - .11.Num â‰… 0; # OUTPUT: Â«Trueâ¤Â» 
```

=== åºåˆ—

link:https://en.wikipedia.org/wiki/Sequence[åºåˆ—]æ˜¯å…è®¸é‡å¤çš„å¯¹è±¡çš„æšä¸¾é›†åˆï¼Œä¹Ÿæ˜¯ Perl 6 ä¸­ç§°ä¸º link:https://docs.perl6.org/type/Seq[Seq] çš„ç¬¬ä¸€ç±»æ•°æ®ç±»å‹ã€‚ `Seq` èƒ½å¤Ÿè¡¨ç¤ºæ— é™åºåˆ—ï¼Œå¦‚è‡ªç„¶æ•°ï¼š

```perl6
my \ğ•Ÿ = 1,2 â€¦ âˆ;
say ğ•Ÿ[3];# OUTPUT: Â«4â¤Â» 
```

æ— é™åºåˆ—ä½¿ç”¨ âˆï¼Œ`Inf` æˆ– `*`ï¼ˆWhateverï¼‰ä½œä¸ºç»ˆæ­¢ç¬¦ã€‚ `...` æ˜¯åˆ—è¡¨ç”Ÿæˆå™¨ï¼Œåªè¦æ’å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå®ƒå®é™…ä¸Šå¯ä»¥ç†è§£ç®—æœ¯å’Œå‡ ä½•çº§æ•°ï¼š

```perl6
say 1,5,9 â€¦ * > 100;
# OUTPUT: Â«(1 5 9 13 17 21 25 29 33 37 41 45 49 53 57 61 65 69 73 77 81 85 89 93 97 101)â¤Â» 
say 1,3,9 â€¦ * > 337; # OUTPUT: Â«(1 3 9 27 81 243 729)â¤Â» 
```

å½“ç”Ÿæˆçš„æ•°å­—å¤§äº 100 æ—¶ï¼Œç¬¬ä¸€ä¸ªåºåˆ—å°†ç»ˆæ­¢; ç¬¬äºŒä¸ªåºåˆ—ï¼Œå½“å®ƒå¤§äº 337 æ—¶ï¼Œæ˜¯å‡ ä½•çº§æ•°ã€‚

å¯ä»¥ä½¿ç”¨ä»»æ„ç”Ÿæˆå™¨çš„äº‹å®å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”Ÿæˆåƒ link:https://en.wikipedia.org/wiki/Fibonacci_number[Fibonacci] è¿™æ ·çš„åºåˆ—ï¼š

```perl6
say 1,1, * + * â€¦ * > 50;#  OUTPUT: Â«(1 1 2 3 5 8 13 21 34 55)â¤Â» 
```

äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¡ç®—link:https://en.wikipedia.org/wiki/Golden_ratio[é»„é‡‘æ¯”ä¾‹]çš„è¿‘ä¼¼å€¼ï¼š

```perl6
my @phis = (2.FatRat, 1 + 1 / * ... *);
my @otherphi = (1 - @phis[200], 1 + 1 / * ... *);
say @otherphi[^10, |(20, 30 ... 100)];# OUTPUT: 
# Â«((-0.61803398874989484820458683436563811772030918 
# -0.61803398874989484820458683436563811772030918 
# -0.61803398874989484820458683436563811772030918 
# -0.61803398874989484820458683436563811772030918 
# -0.61803398874989484820458683436563811772030918 
# -0.618033â€¦Â» 
```

link:https://github.com/ajs/perl6-Math-Sequences[Math::Sequences] æ¨¡å—åŒ…å«è®¸å¤šå·²ä¸ºä½ å®šä¹‰çš„æ•°å­¦åºåˆ—ã€‚å®ƒå®šä¹‰äº†link:https://oeis.org/[ç™¾ç§‘å…¨ä¹¦ä¸­çš„è®¸å¤šåºåˆ—]ï¼Œå…¶ä¸­ä¸€äº›åºåˆ—çš„åŸå§‹åç§°ï¼Œå¦‚ â„¤ æˆ– â„ã€‚

ä¸€äº›é›†åˆè¿ç®—ç¬¦ä¹Ÿå¯¹åºåˆ—è¿›è¡Œæ“ä½œï¼Œå®ƒä»¬å¯ç”¨äºæŸ¥æ˜å¯¹è±¡æ˜¯å¦æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š

```perl6
say 876 âˆˆ (7,14 â€¦ * > 1000) ; # OUTPUT: Â«Falseâ¤Â» 
```

åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º `876` æ˜¯å¦æ˜¯ 7 çš„ç›´æ¥å€æ•°ï¼Œä½†åŒæ ·çš„åŸç†é€‚ç”¨äºä½¿ç”¨å¤æ‚å‘ç”Ÿå™¨çš„å…¶ä»–åºåˆ—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨é›†åˆåŒ…å«è¿ç®—ç¬¦ï¼š

```perl6
say (55,89).Set âŠ‚ (1,1, * + * â€¦ * > 200); # OUTPUT: Â«Trueâ¤Â» 
```

è™½ç„¶å®ƒæ²¡æœ‰è€ƒè™‘åˆ°å®ƒæ˜¯å¦å®é™…ä¸Šæ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä½†è¿™é‡Œåªæ˜¯å­˜åœ¨ä¸¤ä¸ªå…ƒç´ ;é›†åˆæ²¡æœ‰é¡ºåºï¼Œå³ä½¿æ‚¨æ²¡æœ‰å°†å­åºåˆ—æ˜¾å¼åœ°è½¬æ¢ä¸ºSetæˆ–æ˜¾å¼åœ°å°†å…¶è½¬æ¢ä¸ºSeqï¼Œå®ƒä¹Ÿä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºåŒ…å«è¿ç®—ç¬¦çš„åº”ç”¨ç¨‹åºã€‚

=== æ•°å­¦å¸¸æ•°

Perl 6 å·²ç»åŒ…å«äº†ä¸€ç»„æ•°å­¦å¸¸é‡ä½œä¸ºæ ¸å¿ƒçš„ä¸€éƒ¨åˆ†ã€‚

```perl6
say Ï€; # OUTPUT: Â«3.141592653589793Â» 
say Ï„; # Equivalent to 2Ï€; OUTPUT: Â«6.283185307179586Â» 
say ğ‘’; # OUTPUT: Â«2.718281828459045â¤Â» 
```

å®ƒä»¬çš„æ‹‰ä¸åå­— `e`, `pi` å’Œ `tau` ä¹Ÿæ˜¯å¯å¾—çš„, å…·æœ‰ç›¸åŒçš„å€¼ (å°½ç®¡ `ğ‘’` åœ¨ MoarVM å¤–é¢è®¿é—®ä¸äº†).

link:https://github.com/JJ/p6-math-constants/pulls[Math::Constants] æ¨¡å—åŒ…æ‹¬ä¸€ç³»åˆ—é¢å¤–çš„ç‰©ç†å’Œæ•°å­¦å¸¸æ•°ï¼Œä¾‹å¦‚å‰é¢æåˆ°çš„é»„é‡‘æ¯”ç‡ `Ï†` æˆ–æ™®æœ—å…‹å¸¸æ•° `â„`ã€‚

ç”±äº Perl 6 å…è®¸å®šä¹‰ä½¿ç”¨ Unicode å­—å½¢çš„å˜é‡ï¼Œä»¥åŠæ²¡æœ‰ä»»ä½•ç±»å‹çš„ sigil çš„å˜é‡å’Œå¸¸é‡åç§°ï¼Œå› æ­¤ä½¿ç”¨æ¦‚å¿µçš„å®é™…æ•°å­¦åç§°æ¥å°½å¯èƒ½åœ°å‘½åå®ƒä»¬è¢«è®¤ä¸ºæ˜¯ä¸€ç§å¥½çš„åšæ³•ã€‚

